[![GitHub Release][releases-shield]][releases]
[![GitHub Activity][commits-shield]][commits]
[![License][license-shield]](LICENSE)
[![hacs][hacsbadge]][hacs]

![–ö–°–ö –ö–∞–ª—É–≥–∞ logo](images/logo.png)

# Home Assistant –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ö–°–ö (–ö–∞–ª—É–∂—Å–∫–∞—è –°–±—ã—Ç–æ–≤–∞—è –ö–æ–º–ø–∞–Ω–∏—è)

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è Home Assistant –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º –ö–∞–ª—É–∂—Å–∫–æ–π –°–±—ã—Ç–æ–≤–æ–π –ö–æ–º–ø–∞–Ω–∏–∏ (—ç–ª–µ–∫—Ç—Ä–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ).

[üîó **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –ö–°–ö**](https://svet.kaluga.ru) 

---

## ‚ú® **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

- üîå **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç–ª–µ–∫—Ç—Ä–æ—Å—á–µ—Ç—á–∏–∫–æ–≤** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üìä **–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–∫–∞–∑–∞–Ω–∏–π –∏ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∏ –ø–ª–∞—Ç–µ–∂–µ–π
- üìù **–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π —Å—á–µ—Ç—á–∏–∫–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
- üßæ **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤ –Ω–∞ –æ–ø–ª–∞—Ç—É** - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚ö° **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ —É—á–µ—Ç–∞** - –¥–µ–Ω—å/–Ω–æ—á—å/–ø–∏–∫
- üöÄ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

## üéâ **–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

### **–í–µ—Ä—Å–∏—è 1.1.1** - –õ–æ–≥–æ—Ç–∏–ø –∏ —É–ª—É—á—à–µ–Ω–∏—è
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø –ö–°–ö** - —Ñ–∏—Ä–º–µ–Ω–Ω–∞—è –∏–∫–æ–Ω–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ **–£–ª—É—á—à–µ–Ω –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ Home Assistant

### **–í–µ—Ä—Å–∏—è 1.1.0** - Major Update
- ‚úÖ **–£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Selenium** - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω –±—Ä–∞—É–∑–µ—Ä!
- ‚úÖ **–ü—Ä—è–º—ã–µ API –≤—ã–∑–æ–≤—ã** - –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** - —Ç–æ–ª—å–∫–æ aiohttp –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## üì¶ **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**

### –ß–µ—Ä–µ–∑ HACS (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–°–ø–æ—Å–æ–± 1.** [![–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ HACS](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=kirush0280&repository=home-assistant-ksk-integration&category=integration) ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

**–°–ø–æ—Å–æ–± 2.** –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ HACS:
1. –û—Ç–∫—Ä–æ–π—Ç–µ HACS –≤ Home Assistant  
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Integrations**
3. –ù–∞–∂–º–∏—Ç–µ **‚ãÆ** ‚Üí **Custom repositories**
4. –î–æ–±–∞–≤—å—Ç–µ URL: `https://github.com/kirush0280/home-assistant-ksk-integration`
5. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é: **Integration**
6. –ù–∞–∂–º–∏—Ç–µ **Add** ‚Üí **Install**
7. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Home Assistant

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `custom_components/ksk` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `custom_components` –≤–∞—à–µ–≥–æ Home Assistant
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Home Assistant
3. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ UI

---

## ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∞**

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Å–ª—É–∂–±—ã** ‚Üí **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** ‚Üí [![–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é](https://my.home-assistant.io/badges/config_flow_start.svg)](https://my.home-assistant.io/redirect/config_flow_start/?domain=ksk) ‚Üí –ü–æ–∏—Å–∫ **–ö–°–ö –ö–∞–ª—É–≥–∞**

–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ:

[![–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –ö–°–ö](https://my.home-assistant.io/badges/config_flow_start.svg)](https://my.home-assistant.io/redirect/config_flow_start/?domain=ksk)

### –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:
- **–ù–æ–º–µ—Ä –ª–∏—Ü–µ–≤–æ–≥–æ —Å—á–µ—Ç–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä: 204027528)
- **–ü–∞—Ä–æ–ª—å** –æ—Ç –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ [–ö–°–ö](https://svet.kaluga.ru/auth)

---

## üìä **–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏**

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã –¥–ª—è –≤–∞—à–µ–≥–æ –ª–∏—Ü–µ–≤–æ–≥–æ —Å—á–µ—Ç–∞:

### üí∞ **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**
- `sensor.ksk_XXXXXXXXX_balance` - –ë–∞–ª–∞–Ω—Å –ª–∏—Ü–µ–≤–æ–≥–æ —Å—á–µ—Ç–∞
- `sensor.ksk_XXXXXXXXX_penalty` - –ù–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ø–µ–Ω–∏
- `sensor.ksk_XXXXXXXXX_last_payment` - –ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–ª–∞—Ç–µ–∂

### ‚ö° **–ü–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞**
- `sensor.ksk_XXXXXXXXX_readings_day` - –ü–æ–∫–∞–∑–∞–Ω–∏—è (–¥–µ–Ω—å)
- `sensor.ksk_XXXXXXXXX_readings_night` - –ü–æ–∫–∞–∑–∞–Ω–∏—è (–Ω–æ—á—å)
- `sensor.ksk_XXXXXXXXX_tariff_day` - –¢–∞—Ä–∏—Ñ (–¥–µ–Ω—å)
- `sensor.ksk_XXXXXXXXX_tariff_night` - –¢–∞—Ä–∏—Ñ (–Ω–æ—á—å)

### üìà **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ**
- `sensor.ksk_XXXXXXXXX_monthly_consumption` - –ú–µ—Å—è—á–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ
- `sensor.ksk_XXXXXXXXX_average_consumption` - –°—Ä–µ–¥–Ω–µ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ

*–ó–∞–º–µ–Ω–∏—Ç–µ XXXXXXXXX –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä –ª–∏—Ü–µ–≤–æ–≥–æ —Å—á–µ—Ç–∞*

---

## üöÄ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏

```yaml
automation:
  - alias: "–ö–°–ö: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏"
    trigger:
      - platform: numeric_state
        entity_id: sensor.ksk_XXXXXXXXX_balance
        below: 0
    action:
      - service: notify.mobile_app_your_phone
        data:
          title: "‚ö†Ô∏è –ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–æ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤—É"
          message: "–ë–∞–ª–∞–Ω—Å: {{ states('sensor.ksk_XXXXXXXXX_balance') }} ‚ÇΩ"
```

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π

```yaml
automation:
  - alias: "–ö–°–ö: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞"
    trigger:
      - platform: time
        at: "09:00:00"
    condition:
      - condition: time
        weekday:
          - mon
    action:
      - service: ksk.refresh
        target:
          device_id: !device_id "–ö–°–ö Account XXXXXXXXX"
```

### –ì—Ä–∞—Ñ–∏–∫ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è

```yaml
type: history-graph
title: "–ö–°–ö: –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ"
entities:
  - sensor.ksk_XXXXXXXXX_monthly_consumption
  - sensor.ksk_XXXXXXXXX_average_consumption
hours_to_show: 720
```

---

## üõ†Ô∏è **–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã**

### `ksk.refresh` - –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

### `ksk.get_bill` - –ü–æ–ª—É—á–∏—Ç—å —Å—á–µ—Ç
–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—á–µ—Ç –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É.
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `device_id` - ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ö–°–ö
- `date` - –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

### `ksk.send_readings` - –ü–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –≤ –ö–°–ö.

---

## üêõ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞**

### –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤

–î–æ–±–∞–≤—å—Ç–µ –≤ `configuration.yaml`:

```yaml
logger:
  default: warning
  logs:
    custom_components.ksk: debug
```

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞ –ª–∏—Ü–µ–≤–æ–≥–æ —Å—á–µ—Ç–∞ –∏ –ø–∞—Ä–æ–ª—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –Ω–∞ [—Å–∞–π—Ç –ö–°–ö](https://svet.kaluga.ru/auth)

**–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç –¥–∞—Ç—á–∏–∫–æ–≤:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## ü§ù **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**

–ï—Å–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–º–æ–≥–ª–∞ –≤–∞–º, –ø–æ—Å—Ç–∞–≤—å—Ç–µ ‚≠ê –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ GitHub!

### –°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ
[üìù –°–æ–∑–¥–∞—Ç—å Issue](https://github.com/kirush0280/home-assistant-ksk-integration/issues)

### –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ  
[üí° Feature Request](https://github.com/kirush0280/home-assistant-ksk-integration/issues/new)

---

## üìÑ **–õ–∏—Ü–µ–Ω–∑–∏—è**

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

## üîó **–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏**

- [üè† Home Assistant](https://www.home-assistant.io/)
- [üì¶ HACS](https://hacs.xyz/)
- [‚ö° –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –ö–°–ö](https://svet.kaluga.ru)
- [üìã –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ö–°–ö](https://svet.kaluga.ru/auth)

---

<p align="center">
  <sub>–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Home Assistant</sub>
</p>

---

[commits-shield]: https://img.shields.io/github/commit-activity/y/kirush0280/home-assistant-ksk-integration.svg?style=for-the-badge
[commits]: https://github.com/kirush0280/home-assistant-ksk-integration/commits/main
[hacs]: https://hacs.xyz
[hacsbadge]: https://img.shields.io/badge/HACS-Custom-orange.svg?style=for-the-badge
[license-shield]: https://img.shields.io/github/license/kirush0280/home-assistant-ksk-integration.svg?style=for-the-badge
[releases-shield]: https://img.shields.io/github/release/kirush0280/home-assistant-ksk-integration.svg?style=for-the-badge
[releases]: https://github.com/kirush0280/home-assistant-ksk-integration/releases
